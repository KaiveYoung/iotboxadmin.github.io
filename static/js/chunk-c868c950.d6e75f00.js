(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c868c950"],{"0293":function(t,e,n){var a=n("241e"),o=n("53e2");n("ce7e")("getPrototypeOf",function(){return function(t){return o(a(t))}})},"061b":function(t,e,n){t.exports=n("fa99")},"13cb":function(t,e,n){"use strict";var a=n("8dab"),o=n.n(a);o.a},"19de":function(t,e){t.exports=function(t,e,n,a){var o="undefined"!==typeof a?[a,t]:[t],i=new Blob(o,{type:n||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,e);else{var r=window.URL.createObjectURL(i),s=document.createElement("a");s.style.display="none",s.href=r,s.setAttribute("download",e),"undefined"===typeof s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}}},"1c63":function(t,e,n){"use strict";var a=n("ab09"),o=n("19de");e["a"]={components:{DateRange:a["a"]},props:["id"],data:function(){return{dao:null,list:null,total:null,fileDownload:o,footer_data:{count:null,real_fee:null,receivable_fee:null},pagination:{page:1,limit:10},query:{keywords:null,daterange:null},textMap:{update:"编辑",create:"添加"},dialogDetailVisible:!1,listLoading:!0,dialogFormVisible:!1,dialogStatus:"",rules:{},tempInfo:{}}},created:function(){},mounted:function(){this.query=this.$route.params,this.getList()},methods:{gotoTab:function(t,e){this.$router.push({path:t,query:{name:e}}),this.$store.dispatch("addView",this.$route)},indexMethod:function(t){return t+10*this.pagination.page-9},handleFilter:function(){this.pagination.page=1,this.getList()},handleSizeChange:function(t){this.pagination.limit=t,this.getList()},handleCurrentChange:function(t){this.pagination.page=t,this.getList()},onChange:function(t){this.getList()},getList:function(){var t=this;this.listLoading=!0,this.dao.fetchList(this.pagination,this.query).then(function(e){t.list=e.data,t.total=e.count,t.listLoading=!1})},exportList:function(){var t=this;this.dao.exportList(this.pagination,this.query).then(function(e){var n=new Date,a=(t.query.keywords?t.query.keywords:"")+(t.query.daterange?t.query.daterange.start_date+"-"+t.query.daterange.start_date:"")+t.$route.meta.title+"列表-"+"".concat(n.getFullYear()).concat(n.getMonth()<9?"0":"").concat(n.getMonth()+1).concat(n.getDate()<10?"0":"").concat(n.getDate(),".xls");o(e.data,a)})},getOne:function(t){var e=this;this.dao.fetchObject(t).then(function(t){e.tempInfo=t.data})},createData:function(){var t=this;this.$refs["dataForm"].validate(function(t,e){return!!t}),this.dao.createObject(this.tempInfo).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})},updateData:function(t){var e=this;this.$refs["dataForm"].validate(function(t){return!!t}),this.dao.updateObject(t,this.tempInfo).then(function(){e.getList(),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})},deleteData:function(t){var e=this;this.dao.deleteObject(t).then(function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})})},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteData(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},handleDetail:function(t){this.dialogDetailVisible=!0,this.getOne(t)},resetTemp:function(){this.tempInfo={}},handleUpdate:function(t){var e=this;this.resetTemp(),this.dialogStatus="update",this.dialogFormVisible=!0,this.getOne(t),this.$nextTick(function(){e.$refs["dataForm"].clearValidate()})},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs["dataForm"].clearValidate()})},handleToggledisable:function(t,e,n){var a=this;this.dao.enable(t,{disable:e,reason:n}).then(function(){a.getList(),a.dialogFormVisible=!1,a.$notify({title:"成功",message:e?"禁用成功":"启用成功",type:"success",duration:2e3})})}}}},"1df8":function(t,e,n){var a=n("63b6");a(a.S,"Object",{setPrototypeOf:n("ead6").set})},"25b0":function(t,e,n){n("1df8"),t.exports=n("584a").Object.setPrototypeOf},"308d":function(t,e,n){"use strict";var a=n("5d58"),o=n.n(a),i=n("67bb"),r=n.n(i);function s(t){return s="function"===typeof r.a&&"symbol"===typeof o.a?function(t){return typeof t}:function(t){return t&&"function"===typeof r.a&&t.constructor===r.a&&t!==r.a.prototype?"symbol":typeof t},s(t)}function c(t){return c="function"===typeof r.a&&"symbol"===s(o.a)?function(t){return s(t)}:function(t){return t&&"function"===typeof r.a&&t.constructor===r.a&&t!==r.a.prototype?"symbol":s(t)},c(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?l(t):e}n.d(e,"a",function(){return u})},"3ac8":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var a=n("d225"),o=n("308d"),i=n("6bb5"),r=n("4e2b"),s=n("a417"),c=function(t){function e(){return Object(a["a"])(this,e),Object(o["a"])(this,Object(i["a"])(e).apply(this,arguments))}return Object(r["a"])(e,t),e}(s["a"]),l=new c("/manager/custom")},"4aa6":function(t,e,n){t.exports=n("dc62")},"4d16":function(t,e,n){t.exports=n("25b0")},"4e2b":function(t,e,n){"use strict";var a=n("4aa6"),o=n.n(a),i=n("4d16"),r=n.n(i);function s(t,e){return s=r.a||function(t,e){return t.__proto__=e,t},s(t,e)}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=o()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}n.d(e,"a",function(){return c})},"5d58":function(t,e,n){t.exports=n("d8d6")},"5dbc":function(t,e,n){var a=n("d3f4"),o=n("8b97").set;t.exports=function(t,e,n){var i,r=e.constructor;return r!==n&&"function"==typeof r&&(i=r.prototype)!==n.prototype&&a(i)&&o&&o(t,i),t}},"67bb":function(t,e,n){t.exports=n("f921")},"6bb5":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var a=n("061b"),o=n.n(a),i=n("4d16"),r=n.n(i);function s(t){return s=r.a?o.a:function(t){return t.__proto__||o()(t)},s(t)}},"8b97":function(t,e,n){var a=n("d3f4"),o=n("cb7c"),i=function(t,e){if(o(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:i}},"8dab":function(t,e,n){},9427:function(t,e,n){var a=n("63b6");a(a.S,"Object",{create:n("a159")})},a417:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var a=n("d225"),o=n("b0b4"),i=n("b775"),r=function(){function t(e){Object(a["a"])(this,t),this.url=e}return Object(o["a"])(t,[{key:"fetchList",value:function(t,e){var n={};if(t)if(t.page){var a=t.page;n["start"]=(a-1)*t.limit,n["limit"]=t.limit}else n["start"]=0,n["limit"]=t.limit;return Object.assign(n,e),Object(i["a"])({url:this.url,method:"get",params:n})}},{key:"exportList",value:function(t,e){return Object(i["a"])({url:"".concat(this.url),method:"export",responseType:"blob",params:e})}},{key:"fetchObject",value:function(t){return Object(i["a"])({url:"".concat(this.url,"/").concat(t),method:"get"})}},{key:"createObject",value:function(t){return Object(i["a"])({url:this.url,method:"post",data:t})}},{key:"updateObject",value:function(t,e){return Object(i["a"])({url:"".concat(this.url,"/").concat(t),method:"put",data:e})}},{key:"deleteObject",value:function(t){return Object(i["a"])({url:"".concat(this.url,"/").concat(t),method:"delete"})}}]),t}()},aa77:function(t,e,n){var a=n("5ca1"),o=n("be13"),i=n("79e5"),r=n("fdef"),s="["+r+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),f=function(t,e,n){var o={},s=i(function(){return!!r[t]()||c[t]()!=c}),l=o[t]=s?e(p):r[t];n&&(o[n]=l),a(a.P+a.F*s,"String",o)},p=f.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=f},b0b4:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var a=n("85f2"),o=n.n(a);function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),o()(t,a.key,a)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},c5f6:function(t,e,n){"use strict";var a=n("7726"),o=n("69a8"),i=n("2d95"),r=n("5dbc"),s=n("6a99"),c=n("79e5"),l=n("9093").f,u=n("11e9").f,f=n("86cc").f,p=n("aa77").trim,d="Number",m=a[d],b=m,h=m.prototype,g=i(n("2aeb")(h))==d,v="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var n,a,o,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+e}for(var r,c=e.slice(2),l=0,u=c.length;l<u;l++)if(r=c.charCodeAt(l),r<48||r>o)return NaN;return parseInt(c,a)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(g?c(function(){h.valueOf.call(n)}):i(n)!=d)?r(new b(y(e)),n,m):y(e)};for(var _,w=n("9e1e")?l(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)o(b,_=w[x])&&!o(m,_)&&f(m,_,u(b,_));m.prototype=h,h.constructor=m,n("2aba")(a,d,m)}},d225:function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return a})},dc62:function(t,e,n){n("9427");var a=n("584a").Object;t.exports=function(t,e){return a.create(t,e)}},e66d:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"名称",clearable:""},on:{input:t.handleFilter},model:{value:t.query.keywords,callback:function(e){t.$set(t.query,"keywords",e)},expression:"query.keywords"}}),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加\n    ")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%","min-height":"600px","margin-top":"25px"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"ID",type:"index",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"用户名",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.username))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"角色",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.super?"管理员":"客户"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"姓名",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"所属公司",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.custom)+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"电话号码",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.phone))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"创建时间",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.create_time))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{display:"flex"}},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.handleUpdate(e.row.id)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.handleDelete(e.row.id)}}},[t._v("删除")]),t._v(" "),-1!==[3,4,5].indexOf(e.row.verify_state)?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.handleVerify(e.row.id,e.row.verify_state)}}},[t._v("认证")]):t._e()],1)]}}])})],1),t._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{"current-page":t.pagination.page,"page-sizes":[10,20,30,50],"page-size":t.pagination.limit,total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),n("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],"close-on-click-modal":!1,visible:t.dialogFormVisible,width:"500px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.tempInfo,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:t.tempInfo.username,callback:function(e){t.$set(t.tempInfo,"username",e)},expression:"tempInfo.username"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[n("upload",{model:{value:t.tempInfo.avatar,callback:function(e){t.$set(t.tempInfo,"avatar",e)},expression:"tempInfo.avatar"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:t.tempInfo.name,callback:function(e){t.$set(t.tempInfo,"name",e)},expression:"tempInfo.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"所属公司","label-width":"100px",prop:"custom_id"}},[n("RemoteSelect",{staticStyle:{width:"100%"},attrs:{showone:t.tempInfo.custom,label:"company_name",dao:t.custom_dao},model:{value:t.tempInfo.custom_id,callback:function(e){t.$set(t.tempInfo,"custom_id",e)},expression:"tempInfo.custom_id"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[n("el-input",{model:{value:t.tempInfo.phone,callback:function(e){t.$set(t.tempInfo,"phone",e)},expression:"tempInfo.phone"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[n("el-input",{model:{value:t.tempInfo.email,callback:function(e){t.$set(t.tempInfo,"email",e)},expression:"tempInfo.email"}})],1),t._v(" "),1!==t.tempInfo.super?n("el-form-item",{attrs:{label:"角色",prop:"super"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.tempInfo.super,callback:function(e){t.$set(t.tempInfo,"super",e)},expression:"tempInfo.super"}},t._l([{label:"管理员",value:!0},{label:"客户",value:!1}],function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"密码",prop:"create"===t.dialogStatus?"password":""}},[n("el-input",{attrs:{type:"password"},model:{value:t.tempInfo.password,callback:function(e){t.$set(t.tempInfo,"password",e)},expression:"tempInfo.password"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),t._v(" "),"create"===t.dialogStatus?n("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定\n      ")]):n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.update(t.tempInfo.id)}}},[t._v("确定")])],1)],1)],1)},o=[],i=n("d225"),r=n("308d"),s=n("6bb5"),c=n("4e2b"),l=n("a417"),u=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(c["a"])(e,t),e}(l["a"]),f=new u("/system/admin_user"),p=function(t){function e(){return Object(i["a"])(this,e),Object(r["a"])(this,Object(s["a"])(e).apply(this,arguments))}return Object(c["a"])(e,t),e}(l["a"]),d=new p("/system/role/"),m=n("cb4a"),b=(n("0808"),n("1c63")),h=n("3ac8"),g=n("a756"),v={name:"ComplexTable",components:{Upload:m["a"],RemoteSelect:g["a"]},mixins:[b["a"]],data:function(){var t=function(t,e,n){/^[a-zA-Z0-9_-]{4,16}$/.test(e)?n():n(new Error("用户名只能是4-16位字母加数字组合"))};return{custom_dao:h["a"],departmentList:[],tableKey:0,dao:f,select_dao:d,dialogVerifyVisible:!1,rules:{username:[{required:!0,validator:t,trigger:"blur"}],name:[{required:!0,message:"请输入昵称",trigger:"blur"}],custom_id:[{required:!0,message:"请选择所属公司",trigger:"blur"}],super:[{required:!0,message:"请选择角色",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},watch:{dialogStatus:function(){this.tempInfo={}}},created:function(){},methods:{resetTemp:function(){this.temp={}},handleVerify:function(t){this.dialogVerifyVisible=!0,this.verifyData=t},update:function(t){var e=this;this.$refs["dataForm"].validate(function(n){n&&e.updateData(t)})},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&t.dao.createObject(t.tempInfo).then(function(){t.getList(),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3})})})}}},y=v,_=(n("13cb"),n("2877")),w=Object(_["a"])(y,a,o,!1,null,null,null);e["default"]=w.exports},ead6:function(t,e,n){var a=n("f772"),o=n("e4ae"),i=function(t,e){if(o(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("d864")(Function.call,n("bf0b").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:i}},fa99:function(t,e,n){n("0293"),t.exports=n("584a").Object.getPrototypeOf},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);